/*! WP User Manager - v0.1.0
 * http://wp-user-manager.com
 * Copyright (c) 2015; * Licensed GPLv2+ */
jQuery(document).ready(function(a){var b={init:function(){this.general(),this.restore_emails(),this.order_default_fields(),this.restore_default_fields()},general:function(){jQuery(".select2").select2()},restore_emails:function(){a("#wpum-restore-emails").on("click",function(b){if(b.preventDefault(),!confirm(wpum_admin_js.confirm))return!1;var c=a("#wpum_backend_security").val();a.ajax({type:"GET",dataType:"json",url:wpum_admin_js.ajax,data:{action:"wpum_restore_emails",wpum_backend_security:c},beforeSend:function(){a("#wpum-restore-emails").after('<span id="wpum-spinner" class="spinner wpum-spinner"></span>')},success:function(b){a("#wpum-restore-emails").after('<p class="wpum-ajax-done-message"> <span class="dashicons dashicons-yes"></span> '+b.message+"</p>"),a("#wpum-spinner").hide()}})})},order_default_fields:function(){if(a.isFunction(a.fn.sortable)){var b=a(".wpum_fields_table_list").height(),c=a(".wpum_fields_table_list").width();a(".wpum-table-loader").height(b).width(c),a(".wpum_fields_table_list tbody").sortable({helper:this.sortable_table_fix,axis:"y",cursor:"pointer",opacity:.5,placeholder:"row-dragging",delay:150,handle:".column-order, .move-field",update:function(){a(this).children("tr").each(function(){a(this).children("td:first-child").html(a(this).index()),a(this).data("order",a(this).index())}),dataArray=a.map(a(this).children("tr"),function(b){return{order:a(b).data("order"),meta:a(b).data("meta"),required:a(b).data("required")}});var b=a("#wpum_backend_fields_table").val();a.ajax({type:"GET",dataType:"json",url:wpum_admin_js.ajax,data:{action:"wpum_store_default_fields_order",items:dataArray,wpum_backend_fields_table:b},beforeSend:function(){a("#setting-error-").remove(),a(".wpum-table-loader").css("display","table")},success:function(b){a(".wpum-table-loader").css("display","none"),a(".wpum-page-title").after('<div id="setting-error-" class="updated settings-error"><p><strong>'+b.message+"</strong></p></div>")}})}}).disableSelection()}},sortable_table_fix:function(b,c){var d=c.children(),e=c.clone();return e.children().each(function(b){a(this).width(d.eq(b).width())}),e},restore_default_fields:function(){a("#wpum-restore-default-fields").on("click",function(b){if(b.preventDefault(),!confirm(wpum_admin_js.confirm))return!1;var c=a("#wpum_backend_fields_restore").val();a.ajax({type:"GET",dataType:"json",url:wpum_admin_js.ajax,data:{action:"wpum_restore_default_fields",wpum_backend_fields_restore:c},beforeSend:function(){a("#wpum-restore-default-fields").after('<span id="wpum-spinner" class="spinner wpum-spinner"></span>')},success:function(b){a("#wpum-restore-default-fields").after('<p class="wpum-ajax-done-message"> <span class="dashicons dashicons-yes"></span> '+b.message+"</p>"),a("#wpum-spinner").hide()}})})}};b.init()});